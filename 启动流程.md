# BIOS
BIOS是写入到主板上的一个软件程序，也是开机时计算机系统会主动执行的第一个程序。

BIOS会进行一些硬件检测与初始化工作，然后去分析计算机有哪些存储设备（硬盘或者软盘，U盘等），以硬盘为例，BIOS会根据用户设置取得能够开机的硬盘，并读取该硬盘的第一个扇区的MBR位置。

MBR里面放着引导加载程序（Boot loader），当BIOS读取MBR完成后，也就是BIOS执行完毕后，就会执行boot loader程序。

所以，BIOS的工作其实如下：

1. 对硬件进行一系列测试。
2. 初始化硬件设备
3. 搜索一个操作系统来启动，访问系统中软盘、硬盘、CD-ROM的第一个扇区（引导扇区）
4.只要找到一个有效的设备，就把第一个扇区的内容拷贝到RAM中从屋里地址0x7c00开始的位置，然后跳转到这个地址处，开始执行刚装载进来的代码

# boot loader

boot loader程序的主要任务是提供菜单，让用户可以选择不同的开机选项，然后载入内核文件（或者转交其他loader）。

举个例子，假如个人电脑里只有一块硬盘，里面分成四个分区，其中第一与第二分区分别安装了windows和linux，那么boot loader的工作就是选择window或者linux开机，具体流程如下：

0. 前提：MBR内安装的是可同时识别Windows/Linux操作系统的引导加载程序。
1. 引导加载程序提供菜单，菜单上有两个选项。选项一可以直接加载Windows的内核文件来开机；选项二则是将引导加载工作交给第二个分区的启动扇区（boot sector）。（每个分区都拥有自己的启动扇区）
2. 如果用户选择选项二，就会启动第二分区的启动扇区内的引导加载程序，该引导加载程序只有一个开机菜单，因此能使用Linux内核文件开机。
3.如果是linux，跳转到setup()代码
## setup()
setup()汇编语言函数的代码由链接程序放在内核映像文件的偏移量0x200处，引导装载程序因此可以很容易地确定setup()代码的位置，并把它拷贝到从物理地址0x90200开始的RAM中。

setup()函数必须初始化计算机中的硬件设备，并为内核程序的执行建立环境。虽然BIOS已经初始化了大部分硬件设备，但Linux并不依赖于BIOS，而是以自己的方式重新初始化设备以增强可移植性和健壮性。

在setup()函数的最后，跳转到startup_32()汇编语言函数。

## startup_32()函数
有两个不同的startup_32()函数，这里指的是在arch/i386/boot/compressed/head.S中实现的那个。

# kernel


# 开机时，到底是谁调用了start_kernel()。
